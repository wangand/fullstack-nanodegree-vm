{% extends "layout.html" %}
{% block title %}
{{title}}
{% endblock %}

{% block content %}
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

<h1>Create Item</h1>

<div class="createform">
<form id="create_form">
Title:
<input type="text" name="name">

Description:
<input type="text" name="desc">

Category:
<select name="category">
{% for n in categories %}
    <option value={{n}}>{{n}}</option>
{% endfor %}
</select>
<input type="submit">
</form>
</div>

<div id="result"></div>

<script>
$("#create_form").submit(function(event){
    event.preventDefault();
    tryAdd();
});

function tryAdd() {
    $.ajax({
      type: 'POST',
      url: "/tryadd",
      dataType: "html",
      data: $("#create_form").serialize(),
      success: function(result) {
        $("#result").html(result);
      },
      error: function(result) {
        $("#result").html("ERROR");
      },
      
  });
}
</script>
{% endblock %}